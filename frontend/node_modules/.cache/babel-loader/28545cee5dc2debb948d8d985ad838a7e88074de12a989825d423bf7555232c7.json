{"ast":null,"code":"var _jsxFileName = \"/home/illia/projects/blogs/first/frontend/src/components/Comments.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, React } from 'react';\nimport { Container, Row, Button } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\nimport CommentTemplate from \"./subcomponents/CommentTemplate\";\nimport CreateComment from \"./CreateComment\";\nimport api from '../utils/Api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Comments(_ref) {\n  _s();\n  let {\n    blogId,\n    userId,\n    isAdmin\n  } = _ref;\n  const [comments, setComments] = useState({});\n  const onDelete = async commentId => {\n    await api.request(\"delete\", `/blogs/${blogId}/comments/${commentId}`);\n  };\n  const getComments = async () => {\n    const data = await api.request(\"get\", `/blogs/${blogId}/comments`);\n    console.log(data);\n    if (data) {\n      setComments(data);\n    }\n  };\n  useEffect(_ => {\n    const intervalId = setInterval(() => {\n      getComments();\n    }, 2000);\n    return () => clearInterval(intervalId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CreateComment, {\n      blogId: blogId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), comments.length > 0 ? comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CommentTemplate, {\n        comment: comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 25\n      }, this), (comment.author._id == userId || isAdmin) && /*#__PURE__*/_jsxDEV(Button, {\n        color: \"danger\",\n        size: \"lg\",\n        onClick: e => onDelete(comment._id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 33\n      }, this), comment.author._id == userId && /*#__PURE__*/_jsxDEV(NavLink, {\n        to: `/edit-comment/${blogId}/${comment._id}`,\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 64\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 45\n    }, this)) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"No comments...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n}\n_s(Comments, \"rnCHcUpjgv+HdfHc5FNScXZDx8s=\");\n_c = Comments;\nexport default Comments;\nvar _c;\n$RefreshReg$(_c, \"Comments\");","map":{"version":3,"names":["useState","useEffect","React","Container","Row","Button","NavLink","CommentTemplate","CreateComment","api","Comments","blogId","userId","isAdmin","comments","setComments","onDelete","commentId","request","getComments","data","console","log","_","intervalId","setInterval","clearInterval","length","map","comment","author","_id","e"],"sources":["/home/illia/projects/blogs/first/frontend/src/components/Comments.js"],"sourcesContent":["import { useState, useEffect, React} from 'react';\nimport { Container, Row, Button } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\nimport CommentTemplate from \"./subcomponents/CommentTemplate\";\nimport CreateComment from \"./CreateComment\";\nimport api from '../utils/Api';\n\nfunction Comments({ blogId, userId, isAdmin }) {\n    const [comments, setComments] = useState({});\n    \n    const onDelete = async (commentId) => {\n        await api.request(\"delete\", `/blogs/${blogId}/comments/${commentId}`);\n    };\n\n    const getComments = async () => {\n        const data = await api.request(\"get\", `/blogs/${blogId}/comments`);\n        console.log(data)\n        if (data) {\n            setComments(data);\n        }\n    };\n\n    useEffect((_) => {\n        const intervalId = setInterval(() => {\n            getComments()\n        }, 2000);\n        return () => clearInterval(intervalId);\n    }, []);\n\n    return (\n        <div>\n            <CreateComment blogId={blogId}/>\n            {\n                comments.length > 0 ? (\n                    comments.map(comment => <div>\n                        <CommentTemplate comment={comment}/>\n                        {\n                            (comment.author._id == userId || isAdmin) && (\n                                <Button color='danger' size=\"lg\" onClick={e => onDelete(comment._id)}>Delete</Button>\n                            )\n                        }\n                        {\n                            (comment.author._id == userId) && (<NavLink to={`/edit-comment/${blogId}/${comment._id}`}>Edit</NavLink>)\n                        }\n                    </div>)\n                ) : (\n                    <h3>No comments...</h3>\n                )\n            }\n        </div>\n    );\n}\n\nexport default Comments;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,KAAK,QAAO,OAAO;AACjD,SAASC,SAAS,EAAEC,GAAG,EAAEC,MAAM,QAAQ,YAAY;AACnD,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,GAAG,MAAM,cAAc;AAAC;AAE/B,SAASC,QAAQ,OAA8B;EAAA;EAAA,IAA7B;IAAEC,MAAM;IAAEC,MAAM;IAAEC;EAAQ,CAAC;EACzC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE5C,MAAMgB,QAAQ,GAAG,MAAOC,SAAS,IAAK;IAClC,MAAMR,GAAG,CAACS,OAAO,CAAC,QAAQ,EAAG,UAASP,MAAO,aAAYM,SAAU,EAAC,CAAC;EACzE,CAAC;EAED,MAAME,WAAW,GAAG,YAAY;IAC5B,MAAMC,IAAI,GAAG,MAAMX,GAAG,CAACS,OAAO,CAAC,KAAK,EAAG,UAASP,MAAO,WAAU,CAAC;IAClEU,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjB,IAAIA,IAAI,EAAE;MACNL,WAAW,CAACK,IAAI,CAAC;IACrB;EACJ,CAAC;EAEDnB,SAAS,CAAEsB,CAAC,IAAK;IACb,MAAMC,UAAU,GAAGC,WAAW,CAAC,MAAM;MACjCN,WAAW,EAAE;IACjB,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMO,aAAa,CAACF,UAAU,CAAC;EAC1C,CAAC,EAAE,EAAE,CAAC;EAEN,oBACI;IAAA,wBACI,QAAC,aAAa;MAAC,MAAM,EAAEb;IAAO;MAAA;MAAA;MAAA;IAAA,QAAE,EAE5BG,QAAQ,CAACa,MAAM,GAAG,CAAC,GACfb,QAAQ,CAACc,GAAG,CAACC,OAAO,iBAAI;MAAA,wBACpB,QAAC,eAAe;QAAC,OAAO,EAAEA;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAE,EAEhC,CAACA,OAAO,CAACC,MAAM,CAACC,GAAG,IAAInB,MAAM,IAAIC,OAAO,kBACpC,QAAC,MAAM;QAAC,KAAK,EAAC,QAAQ;QAAC,IAAI,EAAC,IAAI;QAAC,OAAO,EAAEmB,CAAC,IAAIhB,QAAQ,CAACa,OAAO,CAACE,GAAG,CAAE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QACxE,EAGAF,OAAO,CAACC,MAAM,CAACC,GAAG,IAAInB,MAAM,iBAAM,QAAC,OAAO;QAAC,EAAE,EAAG,iBAAgBD,MAAO,IAAGkB,OAAO,CAACE,GAAI,EAAE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAgB;IAAA;MAAA;MAAA;MAAA;IAAA,QAE3G,CAAC,gBAEP;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QACH;EAAA;IAAA;IAAA;IAAA;EAAA,QAEH;AAEd;AAAC,GA5CQrB,QAAQ;AAAA,KAARA,QAAQ;AA8CjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}